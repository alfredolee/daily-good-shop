{"version":3,"file":"index.js","sources":["../node_modules/_@babel_runtime@7.7.2@@babel/runtime/helpers/classCallCheck.js","../node_modules/_@babel_runtime@7.7.2@@babel/runtime/helpers/createClass.js","../node_modules/_@babel_runtime@7.7.2@@babel/runtime/helpers/typeof.js","../src/observer/dep.js","../src/observer/reactive.js","../src/observer/observer.js","../src/observer/watcher.js","../src/observer/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","let uid = 0;\n\nexport class Dep {\n  constructor() {\n    this.id = uid++;\n    this.subs = []; // 存储所有的订阅者\n  }\n\n  addSub(sub) {\n    this.subs.push(sub);\n  }\n\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this); // 一个数据对象对应一个dep实例， 此处为收集依赖\n    }\n  }\n\n  // 派发更新\n  notify() {\n    const subs = this.subs.slice();\n    for (let i = 0, l = subs.length; i < l; i++) {\n      subs[i].update();\n    }\n  }\n}\n\nDep.target = null;\nconst targetStack = [];\n\n/**\n *\n * <Parent>\n *   {this.props.data}\n *   <child/>\n *  </Parent>\n *\n *  父组件解析时，碰到子组件会优先去解析子组件，此时使用 pushTarget 把父组件的引用入栈\n *  子组件解析完成后， 通过 popTarget 把父组件出栈， 继续解析父组件\n */\n\nexport function pushTarget(_target) {\n  if (Dep.target) targetStack.push(Dep.target);\n  Dep.target = _target;\n}\n\nexport function popTarget() {\n  Dep.target = targetStack.pop();\n}\n","import { observe } from './observer';\nimport { Dep } from './dep';\n\nexport function reactive(obj, key) {\n  const dep = new Dep();\n  dep.key = key;\n  // if (key === '__ob') return;\n\n  let val = obj[key];\n  observe(val);\n\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function() {\n      console.log('触发getter: ', key, val);\n      const value = val;\n      if (Dep.target) {\n        // console.log('Dep.target: ', Dep.target);\n        dep.depend();\n      }\n      return value;\n    },\n    set: function(newVal) {\n      console.log('触发setter: ', key, newVal);\n      const value = val;\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return;\n      }\n\n      val = newVal;\n      observe(newVal); // 对新设置的属性添加响应式\n      dep.notify();\n    },\n  });\n}\n","import { reactive } from './reactive';\nimport { Dep } from './dep';\n\nexport function observe(value) {\n  if (!isObject(value)) return;\n  return new Observer(value);\n}\n\nexport class Observer {\n  constructor(value) {\n    this.value = value;\n    this.dep = new Dep();\n    value.__ob = true; // 标记此对象已经被监听\n    this.init();\n  }\n\n  init() {\n    const value = this.value;\n    if (Array.isArray(value)) {\n      for (let i = 0, l = value.length; i < l; i++) {\n        observe(value[i]);\n      }\n    } else {\n      const keys = Object.keys(value);\n      for (let i = 0; i < keys.length; i++) {\n        reactive(value, keys[i]);\n      }\n    }\n  }\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n","import { pushTarget, popTarget } from './dep';\n\nlet uid = 0;\n\nexport default class Watcher {\n  /**\n   *\n   * @param vm - 组件实例\n   * @param updateComponent - update函数\n   * @param cb - 回调函数(vm.$watch需要提供)\n   * @param options - 选项配置\n   * @param isRenderWatcher - 是否是渲染 watcher\n   */\n  constructor(vm, updateComponent, cb, options, isRenderWatcher) {\n    this.vm = vm;\n    if (isRenderWatcher) {\n      vm._watcher = this;\n    }\n    vm._watchers.push(this);\n\n    this.cb = cb; // vm.watch的回调\n    this.id = ++uid;\n    this.deps = [];\n    this.depIds = new Set();\n    this.updateComponent = typeof updateComponent === 'function' ? updateComponent : function() {};\n\n    this.value = this.init();\n  }\n\n  init() {\n    pushTarget(this); // 给 Dep.target 赋值为 this\n    /**\n     * 1. vue中的update函数 vm._update(vm._render())\n     * 2. _render() 调用 snabbdom 的 h函数 ,  返回 vnode\n     * 3. _update 去调用 snabbdom 的 patch函数\n     */\n    let value = this.updateComponent();\n    popTarget();\n    return value;\n  }\n\n  addDep(dep) {\n    const id = dep.id;\n    // 判断这个组件是否已经依赖于此数据\n    if (!this.depIds.has(id)) {\n      this.depIds.add(id);\n      this.deps.push(dep);\n      dep.addSub(this); // 组件(Watcher)添加到数据(Dep)的订阅者中去\n    }\n  }\n\n  update() {\n    this.updateComponent();\n  }\n}\n","import { observe } from './observer';\nimport Watcher from './watcher';\n\nclass App {\n  constructor(props) {\n    this.firstRender = true;\n    this.props = props;\n\n    observe(this.props);\n    this.msg = this.props.info;\n    // 存储渲染 watcher\n    this._watcher = null;\n    // 存储所有 watcher\n    this._watchers = []; //\n    /**\n     * 1. 对应这个组件实例生成一个watcher实例\n     * 2. 把组件的update函数传进去\n     * 3. options中可以传入更新时的生命周期\n     * 4. 第四个参数标志这是不是一个渲染 Watcher， 因为vm.watch和vm.computed 同样会实例 Watcher\n     */\n    new Watcher(this, this.update.bind(this), null, {}, true);\n  }\n\n  handleClick() {\n    this.props.message = 'alfredolee';\n  }\n\n  render() {\n    // 首次调用render会触发所依赖数据的getter\n    const p = document.createElement('p');\n    p.innerHTML = `${this.firstRender ? '触发App的首次渲染' : '触发App的更新'} : ${\n      this.props.message\n    } --- ${JSON.stringify(this.props.info)} --- ${JSON.stringify(this.props.arr)}`;\n    return p;\n  }\n\n  update() {\n    const node = this.render();\n    if (this.firstRender) {\n      console.log('触发App的首次渲染');\n      const fragment = document.createDocumentFragment();\n      const input = document.createElement('input');\n      const button = document.createElement('button');\n      button.textContent = '确认修改';\n      button.addEventListener('click', () => {\n        if (input.value) {\n          this.props.message = input.value;\n        }\n      });\n      fragment.append('输入 message 的值： ', input, button, node);\n      document.body.appendChild(fragment);\n      this.firstRender = false;\n    } else {\n      console.log('触发App的更新');\n      document.body.appendChild(node);\n    }\n  }\n}\n\nconst a = new App({\n  message: 'lijian',\n  info: {\n    name: 'lijian',\n    age: 25,\n  },\n  arr: [\n    {\n      a: 1,\n    },\n    2,\n    3,\n  ],\n});\n\nwindow.app = a;\n\nconsole.log(a);\n"],"names":["commonjsHelpers.createCommonjsModule","uid","Dep","id","subs","sub","push","target","addDep","slice","i","l","length","update","targetStack","pushTarget","_target","popTarget","pop","reactive","obj","key","dep","val","observe","Object","defineProperty","enumerable","configurable","get","console","log","value","depend","set","newVal","notify","isObject","Observer","__ob","init","Array","isArray","keys","_typeof","Watcher","vm","updateComponent","cb","options","isRenderWatcher","_watcher","_watchers","deps","depIds","Set","has","add","addSub","App","props","firstRender","msg","info","bind","message","p","document","createElement","innerHTML","JSON","stringify","arr","node","render","fragment","createDocumentFragment","input","button","textContent","addEventListener","append","body","appendChild","a","name","age","window","app"],"mappings":"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"}